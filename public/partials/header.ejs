<div class="top-marquee" role="region" aria-label="Site announcement">
    <div class="marquee-content">Free delivery on orders over $50 â€” limited time offer!</div>
</div>
<header>
    <div class="container header-content">
        <!-- Site Title on left -->
        <button class="site-title" onclick="location.href='/'" aria-label="Go to home">Elegant Fashion</button>

        <!-- Navigation in center -->
        <nav>
            <button class="<%= currentPage === 'home' ? 'active' : '' %>" onclick="location.href='/'">Home</button>
            <button class="<%= currentPage === 'products' ? 'active' : '' %>"
                onclick="location.href='/products'">Products</button>
            <button class="<%= currentPage === 'services' ? 'active' : '' %>"
                onclick="location.href='/services'">Services</button>
            <button class="<%= currentPage === 'about' ? 'active' : '' %>"
                onclick="location.href='/about'">About</button>
            <button class="<%= currentPage === 'contact' ? 'active' : '' %>"
                onclick="location.href='/contact'">Contact</button>
        </nav>

        <!-- Actions: Search, Wishlist, Cart, Account -->
        <div class="header-actions">
            <!-- Search -->
            <form class="search-form">
                <input type="text" placeholder="Search products...">
                <button type="submit" title="Search" aria-label="Search">
                    <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>
            </form>

            <!-- Wishlist -->
            <button class="icon wishlist-btn" title="Wishlist" aria-label="Wishlist">
                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" class="heart-icon">
                    <path
                        d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z">
                    </path>
                </svg>
            </button>

            <!-- Cart -->
            <button class="icon" title="Cart" aria-label="Cart">
                <svg width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path>
                    <path d="M3 6h18"></path>
                    <path d="M16 10a4 4 0 0 1-8 0"></path>
                </svg>
            </button>

            <!-- Account dropdown -->
            <div class="dropdown">
                <% const isAuth=!!user; const displayName=(user && user.name) ? user.name : 'Account' ; %>
                    <button class="account-btn" id="accountBtn" aria-haspopup="menu" aria-expanded="false"
                        aria-controls="accountMenu">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <circle cx="12" cy="7" r="4" stroke="#ffffff" stroke-width="1.8"></circle>
                            <path d="M4 20c0-4 8-4 8-4s8 0 8 4" stroke="#ffffff" stroke-width="1.8"
                                stroke-linecap="round"></path>
                        </svg>
                        <span class="account-label">
                            <%= displayName %>
                        </span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M6 9l6 6 6-6" stroke="#ffffff" stroke-width="1.8" stroke-linecap="round"
                                stroke-linejoin="round"></path>
                        </svg>
                    </button>

                    <div id="accountMenu" class="dropdown-menu" role="menu">
                        <% if (!isAuth) { %>
                            <a class="dropdown-item" href="/login" role="menuitem">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" stroke="currentColor"
                                        stroke-width="1.5" />
                                    <path d="M10 17l5-5-5-5" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                    <path d="M15 12H3" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round" />
                                </svg>
                                Log in
                            </a>
                            <a class="dropdown-item" href="/signup" role="menuitem">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                    <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5"></circle>
                                    <path d="M4 20c0-4 8-4 8-4s8 0 8 4" stroke="currentColor" stroke-width="1.5"
                                        stroke-linecap="round">
                                    </path>
                                    <path d="M8 12h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
                                    </path>
                                </svg>
                                Sign up
                            </a>
                            <!-- Forgot password removed as requested -->
                            <% } else { %>
                                <div class="dropdown-item" role="menuitem" tabindex="-1" aria-disabled="true"
                                    style="opacity:.85;cursor:default;">
                                    Signed in as <strong style="margin-left:6px;">
                                        <%= displayName %>
                                    </strong>
                                </div>
                                <hr class="dropdown-sep" />
                                <a class="dropdown-item" href="/profile" role="menuitem">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5"></circle>
                                        <path d="M4 20c0-4 8-4 8-4s8 0 8 4" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round"></path>
                                    </svg>
                                    Profile
                                </a>
                                <a class="dropdown-item" href="/orders" role="menuitem">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                        <path d="M7 7h10v10H7z" stroke="currentColor" stroke-width="1.5"></path>
                                        <path d="M7 10h10M7 13h10" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round"></path>
                                    </svg>
                                    Orders
                                </a>
                                <hr class="dropdown-sep" />
                                <a class="dropdown-item" href="/logout" role="menuitem">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" stroke="currentColor"
                                            stroke-width="1.5" />
                                        <path d="M10 17l5-5-5-5" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M15 12H3" stroke="currentColor" stroke-width="1.5"
                                            stroke-linecap="round" />
                                    </svg>
                                    Logout
                                </a>
                                <% } %>
                    </div>
            </div>
        </div>
    </div>
</header>