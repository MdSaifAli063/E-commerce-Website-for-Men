<!DOCTYPE html>
<html lang="en" style="height:100%">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Book a Service - Elegant Fashion</title>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&family=Inter:wght@400;700&family=Poppins:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Inter', Arial, sans-serif;
            background: linear-gradient(135deg, #f7f7f8 0%, #f4e4a6 100%);
            color: #1a2332;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 32px;
        }

        header {
            background: linear-gradient(90deg, #fff 80%, #f4e4a6 100%);
            box-shadow: 0 10px 30px rgba(26, 35, 50, 0.15);
            position: sticky;
            top: 0;
            z-index: 50;
            border-bottom: 1px solid #e8e4e0;
            border-radius: 0 0 24px 24px;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 70px;
            position: relative;
            padding: 0 15px;
            max-width: 1400px;
            margin: 0 auto;
        }

        nav {
            position: absolute;
            left: 45%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            flex-shrink: 0;
            z-index: 10;
        }

        nav button {
            background: none;
            border: none;
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: 500;
            font-size: 12px;
            color: #1a2332;
            cursor: pointer;
            transition: color 0.2s, transform 0.2s, background 0.2s;
            padding: 8px 16px;
            border-radius: 8px 16px 16px 8px;
            position: relative;
        }

        nav button.active,
        nav button:hover {
            color: #d4af37;
            background: none;
            box-shadow: none;
            position: relative;
        }

        nav button.active::after,
        nav button:hover::after {
            content: "";
            display: block;
            position: absolute;
            left: 16px;
            right: 16px;
            bottom: 4px;
            height: 3px;
            border-radius: 2px;
            background: linear-gradient(90deg, #d4af37 60%, #f4e4a6 100%);
            transition: width 0.2s;
        }

        .site-title {
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: bold;
            font-size: 28px;
            color: #1a2332;
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.2s, text-shadow 0.2s;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 8px #f4e4a6;
            margin: 0;
        }

        .site-title:hover {
            color: #d4af37;
            text-shadow: 0 4px 16px #d4af37;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        /* form styles from contact page */
        .contact-wrap {
            position: relative;
            max-width: 800px;
            margin: 28px auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 28px;
            align-items: start;
            background: #fff;
            padding: 32px 32px 32px 40px;
            border-radius: 24px;
            box-shadow: 0 12px 40px rgba(212, 175, 55, 0.1);
            border: 2px solid #d4af37;
        }

        .contact-wrap::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: linear-gradient(180deg, #d4af37, #f4e4a6);
            border-radius: 24px 0 0 24px;
        }

        .contact-form {
            background: #fff;
            padding: 40px 40px 32px 40px;
            border-radius: 22px;
            box-shadow: 0 12px 50px rgba(212, 175, 55, 0.12);
            border: 1px solid #f4e4a6;
            position: relative;
        }

        .contact-form label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #1a2332;
            margin-bottom: 6px;
        }

        .contact-form .row {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .contact-form input,
        .contact-form textarea,
        .contact-form select {
            padding: 14px;
            border: 1px solid #d4af37;
            border-radius: 8px;
            width: 100%;
            font-size: 15px;
            background: #fff;
            box-sizing: border-box;
            transition: border 0.2s, box-shadow 0.2s;
        }

        .contact-form textarea {
            resize: vertical;
            min-height: 120px;
        }

        .contact-form input:focus,
        .contact-form textarea:focus,
        .contact-form select:focus {
            outline: none;
            border-color: #f4e4a6;
            box-shadow: 0 0 8px rgba(212, 175, 55, 0.3);
        }

        .contact-form .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            justify-content: flex-end;
            align-items: center;
        }

        .contact-form .form-actions .btn-gold {
            padding: 12px 32px;
            font-size: 16px;
            text-transform: uppercase;
        }

        /* alerts from signup page */
        .alert {
            padding: 10px 14px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid transparent;
        }

        .alert-error {
            background: rgba(239, 68, 68, 0.06);
            border-color: rgba(239, 68, 68, 0.25);
            color: #fecaca;
        }

        .alert-success {
            background: rgba(34, 197, 94, 0.08);
            border-color: rgba(34, 197, 94, 0.25);
            color: #bbf7d0;
        }

        /* section/aesthetics */
        .hero-section {
            padding: 80px 0;
            border-radius: 0 0 48px 48px;
            position: relative;
            overflow: hidden;
            margin-top: 0;
            margin-bottom: 40px;
        }

        .section {
            padding: 60px 0;
        }

        .section.bg-cream {
            background: linear-gradient(135deg, #f7f7f8 80%, #f4e4a6 100%);
        }

        .section-title {
            font-size: 40px;
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: bold;
            color: #1a2332;
            margin-bottom: 24px;
            letter-spacing: 2px;
        }

        .section-desc {
            font-size: 22px;
            color: #4a5568;
            margin-bottom: 40px;
        }

        .btn-gold {
            background: linear-gradient(90deg, #d4af37, #f4e4a6);
            color: #1a2332;
            border: none;
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: 600;
            cursor: pointer;
            border-radius: 8px 16px 16px 8px;
            transition: background 0.2s, transform 0.2s;
        }

        .btn-gold:hover {
            background: linear-gradient(90deg, #f4e4a6, #d4af37);
            transform: translateY(-2px);
        }

        footer {
            background: linear-gradient(90deg, #1a2332 80%, #d4af37 100%);
            color: #fff;
            padding: 64px 0 32px 0;
            border-radius: 32px 32px 0 0;
            box-shadow: 0 -4px 24px #d4af37;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            margin-bottom: 32px;
        }

        .footer-title {
            font-family: 'Poppins', Arial, sans-serif;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 18px;
            letter-spacing: 1px;
            color: #f4e4a6;
            text-shadow: 0 2px 8px #1a2332;
        }

        .footer-links,
        .footer-categories,
        .footer-service {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li,
        .footer-categories li,
        .footer-service li {
            margin-bottom: 10px;
        }

        .footer-links a,
        .footer-categories a,
        .footer-service a {
            color: #fff;
            text-decoration: none;
            font-size: 16px;
            transition: color 0.2s;
        }

        .footer-links a:hover,
        .footer-categories a:hover,
        .footer-service a:hover {
            color: #d4af37;
            text-decoration: underline;
        }

        .footer-bottom {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 18px;
        }

        .footer-bottom button {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            cursor: pointer;
            margin: 0 8px;
            transition: color 0.2s;
        }

        .footer-bottom button:hover {
            color: #d4af37;
            text-decoration: underline;
        }

        .footer-left-social {
            margin-top: 24px;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .footer-left-social a {
            display: inline-flex;
            width: 40px;
            height: 40px;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            color: #fff;
            text-decoration: none;
            transition: transform 0.15s, box-shadow 0.15s, opacity 0.15s;
        }

        .footer-left-social a.fb {
            background: #1877F2;
        }

        .footer-left-social a.ig {
            background: radial-gradient(circle at 30% 107%, #fdf497 0%, #fd5949 45%, #d6249f 60%, #285AEB 90%);
        }

        .footer-left-social a.tw {
            background: #1DA1F2;
        }

        .footer-left-social a.li {
            background: #0A66C2;
        }

        .footer-left-social a:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.18);
        }

        @media (max-width: 900px) {
            .footer-left-social {
                justify-content: center;
            }
        }

        @media (max-width: 900px) {
            .footer-content {
                grid-template-columns: 1fr;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 16px;
            }
        }
    </style>
</head>

<body>
    <!-- back-to-home arrow -->
    <div class="back-home" aria-hidden="false">
        <a href="/" class="back-home-link" aria-label="Back to home">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" aria-hidden="true">
                <path d="M19 12H6"></path>
                <path d="M12 19l-7-7 7-7"></path>
            </svg>
        </a>
    </div>
    <style>
        /* back button styles copied from component */
        .back-home {
            position: fixed;
            top: 14px;
            left: 14px;
            z-index: 9999;
        }

        .back-home-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.95);
            color: #1a2332;
            text-decoration: none;
            box-shadow: 0 6px 18px rgba(16, 24, 40, 0.12);
            transition: transform .12s ease, box-shadow .12s ease;
        }

        .back-home-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(16, 24, 40, 0.18);
        }

        .back-home-link svg {
            width: 20px;
            height: 20px;
        }

        @media (max-width:480px) {
            .back-home {
                top: 10px;
                left: 10px;
            }

            .back-home-link {
                width: 40px;
                height: 40px;
            }
        }
    </style>

    <main>
        <section class="hero-section"
            style="background: linear-gradient(135deg, #1a2332 0%, #2d3748 50%, #d4af37 100%);">
            <div style="position:absolute;inset:0;background:rgba(0,0,0,0.2);"></div>
            <div class="container"
                style="position:relative;z-index:1;text-align:center;max-width:1200px;margin:0 auto;">
                <h1
                    style="font-size:60px;font-weight:900;color:#d4af37;margin:0 0 20px 0;letter-spacing:2px;text-shadow:0 4px 16px rgba(0,0,0,0.4);">
                    Schedule Your Service</h1>
                <p style="font-size:18px;color:#cbd5e1;max-width:800px;margin:0 auto;line-height:1.6;">
                    Choose a service and tell us your preferences — we’ll reach out to confirm your appointment.
                </p>
            </div>
        </section>

        <section class="section bg-cream">
            <div class="container">
                <div class="section-title">Book a Service</div>
                <div class="section-desc">Fill out the form below and we'll get back to you to confirm your appointment.
                </div>
                <% if (typeof success !=='undefined' && success) { %>
                    <div class="alert alert-success">
                        <%= success %>
                    </div>
                    <% } %>
                        <% if (typeof errors !=='undefined' && errors.length) { %>
                            <div class="alert alert-error">
                                <ul style="margin:0; padding-left:18px;">
                                    <% errors.forEach(function(err){ %>
                                        <li>
                                            <%= err %>
                                        </li>
                                        <% }) %>
                                </ul>
                            </div>
                            <% } %>
                                <div class="contact-wrap">
                                    <form class="contact-form" action="/booking" method="post" novalidate>
                                        <div class="row">
                                            <div style="flex:1;">
                                                <label for="name">Name</label>
                                                <input type="text" id="name" name="name" required
                                                    value="<%= formData && formData.name ? formData.name : '' %>">
                                            </div>
                                            <div style="flex:1;">
                                                <label for="email">Email</label>
                                                <input type="email" id="email" name="email" required
                                                    value="<%= formData && formData.email ? formData.email : '' %>">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div style="flex:1;">
                                                <label for="phone">Phone</label>
                                                <input type="text" id="phone" name="phone"
                                                    value="<%= formData && formData.phone ? formData.phone : '' %>">
                                            </div>
                                            <div style="flex:1;">
                                                <label for="service">Service</label>
                                                <select id="service" name="service" required>
                                                    <option value="">-- select --</option>
                                                    <option value="Custom Tailoring" <%=formData &&
                                                        formData.service==='Custom Tailoring' ? 'selected' : '' %>
                                                        >Custom Tailoring</option>
                                                    <option value="Alterations" <%=formData &&
                                                        formData.service==='Alterations' ? 'selected' : '' %>
                                                        >Alterations</option>
                                                    <option value="Style Consultation" <%=formData &&
                                                        formData.service==='Style Consultation' ? 'selected' : '' %>
                                                        >Style Consultation</option>
                                                    <option value="Wardrobe Refresh" <%=formData &&
                                                        formData.service==='Wardrobe Refresh' ? 'selected' : '' %>
                                                        >Wardrobe Refresh</option>
                                                    <option value="Stitching & Repairs" <%=formData &&
                                                        formData.service==='Stitching & Repairs' ? 'selected' : '' %>
                                                        >Stitching & Repairs</option>
                                                    <option value="Embroidery & Monogramming" <%=formData &&
                                                        formData.service==='Embroidery & Monogramming' ? 'selected' : ''
                                                        %>>Embroidery & Monogramming</option>
                                                    <option value="Personal Shopping" <%=formData &&
                                                        formData.service==='Personal Shopping' ? 'selected' : '' %>
                                                        >Personal Shopping</option>
                                                    <option value="Suit Fitting & Design" <%=formData &&
                                                        formData.service==='Suit Fitting & Design' ? 'selected' : '' %>
                                                        >Suit Fitting & Design</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div style="margin-top:12px;">
                                            <label for="date">Preferred Date</label>
                                            <input type="date" id="date" name="date"
                                                value="<%= formData && formData.date ? formData.date : '' %>">
                                        </div>
                                        <div style="margin-top:12px;">
                                            <label for="message">Additional Details</label>
                                            <textarea id="message" name="message"
                                                rows="4"><%= formData && formData.message ? formData.message : '' %></textarea>
                                        </div>
                                        <div class="form-actions">
                                            <button class="btn-gold" type="submit" style="padding:10px 24px;">Submit
                                                Booking</button>
                                        </div>
                                    </form>
                                </div>
            </div>
        </section>
    </main>

    <%- include('partials/footer.ejs') %>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Nav active state and keyboard support
            const navButtons = document.querySelectorAll("nav button");
            navButtons.forEach((btn) => {
                btn.addEventListener("click", () => {
                    navButtons.forEach((b) => b.classList.remove("active"));
                    btn.classList.add("active");
                });
                btn.addEventListener("keydown", (e) => {
                    if (e.key === "Enter" || e.key === " ") {
                        e.preventDefault();
                        btn.click();
                    }
                });
            });

            // Newsletter form (demo)
            const newsletterForm = document.querySelector(".newsletter-form");
            newsletterForm?.addEventListener("submit", (e) => {
                e.preventDefault();
                alert("Thank you for subscribing!");
            });

            // Sticky header shadow
            const header = document.querySelector("header");
            const baseShadow = "0 10px 30px rgba(26, 35, 50, 0.15)";
            const scrolledShadow = "0 10px 30px rgba(26, 35, 50, 0.25)";
            function updateHeaderShadow() {
                if (!header) return;
                header.style.boxShadow = window.scrollY > 10 ? scrolledShadow : baseShadow;
            }
            updateHeaderShadow();
            window.addEventListener("scroll", updateHeaderShadow, { passive: true });

            // Search and Cart actions (demo)
            document
                .querySelector('.search-form')
                ?.addEventListener("submit", (e) => {
                    e.preventDefault();
                    const query = e.target.querySelector('input').value.trim();
                    if (query) {
                        alert(`Searching for: "${query}" - functionality coming soon!`);
                    } else {
                        alert("Please enter a search term.");
                    }
                });

            document
                .querySelector('.header-actions button[title="Cart"]')
                ?.addEventListener("click", () => {
                    location.href = '/cart';
                });

            document
                .querySelector('.header-actions button[title="Wishlist"]')
                ?.addEventListener("click", () => {
                    location.href = '/wishlist';
                });

            // Account dropdown (Log in / Sign up / Profile / Orders / Logout)
            const accountBtn = document.getElementById("accountBtn");
            const accountMenu = document.getElementById("accountMenu");

            function openMenu() {
                if (!accountMenu || !accountBtn) return;
                accountMenu.classList.add("open");
                accountBtn.setAttribute("aria-expanded", "true");
                const firstItem = accountMenu.querySelector(".dropdown-item");
                firstItem?.focus();
            }

            function closeMenu() {
                if (!accountMenu || !accountBtn) return;
                accountMenu.classList.remove("open");
                accountBtn.setAttribute("aria-expanded", "false");
            }

            function toggleMenu() {
                if (!accountMenu || !accountBtn) return;
                const isOpen = accountMenu.classList.contains("open");
                isOpen ? closeMenu() : openMenu();
            }

            accountBtn?.addEventListener("click", (e) => {
                e.stopPropagation();
                toggleMenu();
            });

            // Close on outside click
            document.addEventListener("click", (e) => {
                if (!accountMenu || !accountBtn) return;
                const target = e.target;
                const clickInsideMenu = accountMenu.contains(target);
                const clickOnBtn = accountBtn.contains(target);
                if (!clickInsideMenu && !clickOnBtn) {
                    closeMenu();
                }
            });

            // Close menu when clicking any menu item
            accountMenu?.addEventListener("click", (e) => {
                const a = e.target.closest("a.dropdown-item");
                if (a) {
                    // Allow navigation; just close the menu visually
                    closeMenu();
                }
            });

            // Keyboard handling: Escape to close, Tab to cycle within menu
            document.addEventListener("keydown", (e) => {
                if (!accountMenu || !accountBtn) return;

                if (e.key === "Escape" && accountMenu.classList.contains("open")) {
                    e.preventDefault();
                    closeMenu();
                    accountBtn.focus();
                    return;
                }

                if (e.key === "Tab" && accountMenu.classList.contains("open")) {
                    const focusables = Array.from(
                        accountMenu.querySelectorAll('.dropdown-item, [role="menuitem"], a[href], button:not([disabled])')
                    );
                    if (focusables.length === 0) return;

                    const currentIndex = focusables.indexOf(document.activeElement);
                    let nextIndex = currentIndex;

                    if (e.shiftKey) {
                        nextIndex = currentIndex <= 0 ? focusables.length - 1 : currentIndex - 1;
                    } else {
                        nextIndex = currentIndex === focusables.length - 1 ? 0 : currentIndex + 1;
                    }

                    // If focus is not inside menu yet, start at first/last based on tab direction
                    if (currentIndex === -1) {
                        nextIndex = e.shiftKey ? focusables.length - 1 : 0;
                    }

                    e.preventDefault();
                    focusables[nextIndex].focus();
                }
            });
        });
    </script>
</body>

</html>